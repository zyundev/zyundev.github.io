---
layout: post
categories: [개발독서, 켄트벡의 구현패턴]
tags: [켄트벡, 구현패턴]
---
### 애플리케이션 수정 없이 프레임워크 수정하기 (프레임워크 개발의 어려운 점)

- 이상적인 프레임워크 업그레이드는 기능 추가를 하면서도 기존 기능이 변함 없이 작동하게 해야함
- 호환성을 유지하기 위해서는 때로 프레임워크의 복잡도가 올라가기도 한다

  → 두마리 토끼를 잡는건 불가능 어떤 관점을 중점적으로 가게되면 다른 쪽이 비효율적으로 가게 되는건 어쩔수 없나봄

- 여러 제약 사항들로 인해 프레임워크 개발은 애플리케이션 개발에 비해 위험성이 높고 비용이 많이 듬

### 호환성 없는 업그레이드

- 병렬 아키텍처는 복잡도를 높이지만 업그레이드로 인한 문제점을 줄여줌 → 자바 컬렉션 클래스가 사용
- import문을 수정하는 것은 실제 코드를 바꾸는 것에 비해 위험도가 훨씬 낮음
- 이클립스는 호환성이 유지되지 않는 업그레이드에 수반되는 비용을 낮추기 위해 자동으로 클라이언트 코드를 업그레이드하는 도구를 제공 → github에서도 이러한 기능이 있던거 같은데..
- 업그레이드 비용을 낮추기 위해서라면 설계 옵션이 줄어드는 것을 감수해야 함
- 환상에 사로잡혀 실제 고객과 멀어지는 실수를 범하지 말라

  → 모 아니면 도


### 호환성을 유지하는 업그레이드

- 프레임워크의 세부구현에 의존하지 말아야함

### 라이브러리 클래스

- 새로운 버전의 라이브러리 클래스를 릴리즈하는 경우에도 기존 메소드가 이전과 같이 동작하는지만 확인하면 됨

### 객체

- 사용스타일
  1. 인스턴스화
  2. 설정
  3. 구현
    - 미래에 있을 설계 변경을 가장 크게 제한함
- 추상화
  - 인터페이스
    - 세부사항을 가급적 적게 드러냄
    - 새로운 메소드를 인터페이스에 추가하는 경우 기존 인터페이스에 대한 모든 클라이언트 구현이 동작하지 않게 됨
    - 버전 인터페이스는 프레임워크 개발자와 클라이언트 모두에게 복잡도를 증가시키므로 자주 변경되는 추상화에 오랜기간 사용되긴 어려움

      → 앞에서도 새로 만들어서 사용하는 걸 추천함

  - 상위클래스
    - 인터페이스와 반대로 세부사항을 나타낼수 있으면서, 상위클래스에 새로운 메소드를 추가해도 호환성 문제가 없음
    - 인터페이스와 달리 클라이언트 클래스는 단 하나의 프레임워크 클래스만을 상속할 수 있음
    - 가급적 클래스에서 노출하는 세부 사항을 줄여서 인터페이스에서 노출하는 정보 수준에 가깝게 하기
  - 생성
    - 생성 금지
      - 가장 단순하고 유용성이 떨어지는 옵션은 클라이언트가 프레임워크 객체를 직접 생성하는 것을 금지 하는 것
    - 생성자
    - 정적공장
    - 공장 객체
    - 생성 - 맺음말
    - 메소드
      - 클라이언트가 내부 자료 구조에 의존하도록 하면 프레임워크를 수정하는 것은 무척 어려워짐
      - 설정 메소드를 공개하는 것보다는 클라이언트가 해결하려는 문제를 메소드 이름에 반영하는 것이 좋음
      - 중요한 프레임워크의 기능이 필드를 반환하거나 설정해서 구현된다면 접근자를 공개해도 괜찮음
      - 단, 메소드 이름에 내부 구현 대신 역할을 반영하도록 하기
